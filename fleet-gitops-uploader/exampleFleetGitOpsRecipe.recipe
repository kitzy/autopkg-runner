<dict>
  <key>Process</key>
  <array>
    <!-- your existing processors that build the .pkg -->
    <dict>
      <key>Processor</key>
      <string>com.github.yourorg.processors/FleetGitOpsUploader</string>
      <key>Arguments</key>
      <dict>
        <key>pkg_path</key><string>%pathname%</string>
        <key>software_title</key><string>%NAME%</string>
        <key>version</key><string>%version%</string>
        <key>platform</key><string>darwin</string>

        <key>fleet_api_base</key><string>https://fleet.example.com</string>
        <key>fleet_api_token</key><string>%FLEET_API_TOKEN%</string>
        <key>team_id</key><string>1</string>

        <key>self_service</key><true/>
        <key>automatic_install</key><false/>
        <key>labels_include_any</key>
        <array><string>Workstations</string></array>

        <key>git_repo_url</key><string>https://github.com/kitzy/fleet-gitops.git</string>
        <key>git_base_branch</key><string>main</string>
        <key>team_yaml_path</key><string>teams/workstations.yml</string>
        <key>software_dir</key><string>lib/macos/software</string>
        <key>team_yaml_package_path_prefix</key><string>../lib/macos/software/</string>

        <key>github_repo</key><string>kitzy/fleet-gitops</string>
        <key>github_token</key><string>%GITHUB_TOKEN%</string>

        <!-- optional: enforce slug and branch prefix -->
        <key>software_slug</key><string>firefox</string>
        <key>branch_prefix</key><string>autopkg</string>
      </dict>
    </dict>
  </array>
</dict>

